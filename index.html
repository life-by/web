<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<title>JSON Generator</title>
<style>
  body { font-family: Arial, sans-serif; padding: 20px; background: #f0f2f5; max-width: 800px; margin: auto; }
  h1, h2 { text-align: center; color: #333; }
  label { font-weight: bold; }
  input, select, button, textarea { padding: 10px; margin: 5px 0; width: 100%; border: 1px solid #ccc; border-radius: 5px; }
  button { background: #4CAF50; color: white; border: none; cursor: pointer; }
  button:hover { background: #45a049; }
  .row { margin-bottom: 15px; }
  textarea { height: 200px; background: #fff; }
  .btn-clear { background: #d9534f; }
  .btn-clear:hover { background: #c9302c; }
  .commission-view { background: #007bff; }
  .commission-view:hover { background: #0069d9; }
</style>
</head>
<body>
<h1>পণ্য যোগ করুন</h1>
<div class="row">
  <label>ক্যাটাগরি:</label>
  <select id="categorySelect"></select>
  <input type="text" id="newCategory" placeholder="নতুন ক্যাটাগরি লিখুন">
  <button onclick="addCategory()">ক্যাটাগরি যোগ করুন</button>
</div>
<div class="row">
  <label>পণ্যের নাম:</label>
  <input type="text" id="name" placeholder="পণ্যের নাম লিখুন">
</div>
<div class="row">
  <label>দাম:</label>
  <input type="number" id="price" placeholder="দাম লিখুন">
</div>
<div class="row">
  <label>ছবির লিংক:</label>
  <input type="text" id="image" placeholder="ছবির URL লিখুন">
</div>
<div class="row">
  <label>বর্ণনা:</label>
  <input type="text" id="description" placeholder="পণ্যের সংক্ষিপ্ত বর্ণনা">
</div>
<div class="row">
  <label>কমিশন (%):</label>
  <input type="number" id="commission" placeholder="কমিশন শতাংশ লিখুন">
</div>
<div class="row">
  <label>কমিশন পাসওয়ার্ড:</label>
  <input type="text" id="commissionPassword" placeholder="পাসওয়ার্ড লিখুন">
</div>
<button onclick="addProduct()">পণ্য যোগ করুন</button>
<button class="btn-clear" onclick="clearData()">সব ডাটা মুছে ফেলুন</button>
<button class="commission-view" onclick="viewCommission()">কমিশন দেখুন</button>
<h2>JSON আউটপুট</h2>
<textarea id="output" readonly></textarea>
<script>
  let products = [];
  let categories = ["Three-Piece", "শাড়ি", "গহনা"];
  const categorySelect = document.getElementById('categorySelect');

  function refreshCategories() {
    categorySelect.innerHTML = '';
    categories.forEach(cat => {
      let opt = document.createElement('option');
      opt.value = cat;
      opt.textContent = cat;
      categorySelect.appendChild(opt);
    });
  }

  function addCategory() {
    let newCat = document.getElementById('newCategory').value.trim();
    if (newCat && !categories.includes(newCat)) {
      categories.push(newCat);
      refreshCategories();
      document.getElementById('newCategory').value = '';
    }
  }

  function addProduct() {
    let product = {
      category: categorySelect.value,
      name: document.getElementById('name').value.trim(),
      price: parseFloat(document.getElementById('price').value),
      image: document.getElementById('image').value.trim(),
      description: document.getElementById('description').value.trim(),
      commission: parseFloat(document.getElementById('commission').value),
      commissionPassword: document.getElementById('commissionPassword').value.trim()
    };
    if (product.name && !isNaN(product.price)) {
      products.push(product);
      updateOutput();
      clearInputs();
    }
  }

  function updateOutput() {
    document.getElementById('output').value = JSON.stringify(products, null, 2);
  }

  function clearInputs() {
    document.getElementById('name').value = '';
    document.getElementById('price').value = '';
    document.getElementById('image').value = '';
    document.getElementById('description').value = '';
    document.getElementById('commission').value = '';
    document.getElementById('commissionPassword').value = '';
  }

  function clearData() {
    products = [];
    updateOutput();
  }

  function viewCommission() {
    let pass = prompt("কমিশন পাসওয়ার্ড লিখুন:");
    let commissionInfo = products.map(p => {
      if (p.commissionPassword === pass) {
        return `${p.name} (${p.category}): ${p.commission}%`;
      }
      return `${p.name} (${p.category}): অনুমতি নেই`;
    }).join('\n');
    alert(commissionInfo);
  }

  function loadJSON() {
    fetch('products.json?v=' + new Date().getTime())
      .then(res => res.json())
      .then(data => {
        products = data;
        updateOutput();
      });
  }

  refreshCategories();
  loadJSON();
</script>
</body>
</html>
