<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSON জেনারেটর - আমার ফ্যাশন বুটিক</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        body { background-color: #f5f5f5; color: #333; line-height: 1.6; padding: 1rem; }
        .container { max-width: 1400px; margin: 0 auto; display: grid; grid-template-columns: 1fr; gap: 2rem; }
        .panel { background: white; border-radius: 8px; padding: 1.5rem; box-shadow: 0 3px 10px rgba(0,0,0,0.1); }
        h1, h2 { color: #8e44ad; margin-bottom: 1rem; border-bottom: 2px solid #eee; padding-bottom: 0.5rem; }
        h1 { text-align: center; grid-column: 1 / -1; margin-bottom: 1.5rem; border-color: #8e44ad; font-size: 1.8rem; }
        .form-group { margin-bottom: 1.5rem; }
        label { display: block; margin-bottom: 0.5rem; font-weight: bold; }
        input[type="text"], input[type="number"], input[type="url"] { width: 100%; padding: 0.8rem; border: 1px solid #ddd; border-radius: 4px; font-size: 1rem; }
        .btn { display: inline-block; background-color: #8e44ad; color: white; border: none; padding: 0.8rem 1.5rem; border-radius: 4px; cursor: pointer; font-size: 1rem; font-weight: bold; transition: background-color 0.3s; text-align: center; }
        .btn:hover { background-color: #732d91; }
        .btn-secondary { background-color: #6c757d; } .btn-secondary:hover { background-color: #5a6268; }
        .btn-add { background-color: #3498db; } .btn-add:hover { background-color: #2980b9; }
        .image-url-container { margin-bottom: 10px; display: flex; align-items: center; gap: 10px; }
        .image-url-container input { flex-grow: 1; }
        .remove-image-btn { background-color: #e74c3c; color: white; border: none; border-radius: 4px; padding: 0.5rem 0.8rem; cursor: pointer; font-weight: bold; line-height: 1; }
        .remove-image-btn:hover { background-color: #c0392b; }
        
        /* --- পণ্য তালিকা এবং ছবি প্রিভিউ এর জন্য নতুন স্টাইল --- */
        .product-list-item {
            background: #f9f9f9;
            border: 1px solid #eee;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        .product-list-item img.preview-image {
            width: 60px;
            height: 60px;
            border-radius: 4px;
            object-fit: cover;
            border: 1px solid #ddd;
        }
        .product-list-item .info {
            flex-grow: 1;
        }
        .product-list-item .actions {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }
        .actions button {
            width: 100%;
            padding: 0.5rem;
            font-size: 0.9rem;
        }
        /* --- স্টাইল পরিবর্তন শেষ --- */

        #jsonOutput { width: 100%; height: 300px; font-family: 'Courier New', Courier, monospace; font-size: 0.9rem; border: 1px solid #ddd; border-radius: 4px; padding: 1rem; white-space: pre; resize: vertical; }
        .output-container { position: relative; }
        .copy-btn { position: absolute; top: 1rem; right: 1rem; }
        .instructions { background-color: #e8dff1; border-left: 5px solid #8e44ad; padding: 1rem; margin-bottom: 1.5rem; grid-column: 1 / -1; }
        
        /* --- ডেস্কটপ ভিউ এর জন্য মিডিয়া কোয়েরি --- */
        @media (min-width: 900px) {
            .container {
                grid-template-columns: 1fr 1.2fr;
            }
            #management-panel {
                display: flex;
                flex-direction: column;
            }
            .panel.list-panel {
                flex-grow: 1;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>প্রোডাক্ট ম্যানেজমেন্ট ও JSON জেনারেটর</h1>

        <div class="instructions">
            <h3>কিভাবে ব্যবহার করবেন:</h3>
            <p>১. নিচের ফর্মটি ব্যবহার করে পণ্যের তথ্য যোগ, এডিট বা ডিলিট করুন।</p>
            <p>২. সবশেষে, "জেনারেট হওয়া JSON কোড" সেকশন থেকে কোডটি কপি করে আপনার GitHub-এর `products.json` ফাইলে পেস্ট করুন।</p>
        </div>

        <div id="management-panel">
            <div class="panel" id="form-panel">
                <h2 id="form-title">নতুন পণ্য যোগ করুন</h2>
                <form id="productForm">
                    <input type="hidden" id="editIndex">
                    <div class="form-group"><label for="productName">পণ্যের নাম</label><input type="text" id="productName" required></div>
                    <div class="form-group"><label for="productPrice">দাম (৳)</label><input type="number" id="productPrice" required></div>
                    <div class="form-group">
                        <label>পণ্যের ছবি (অন্তত ৩টি)</label>
                        <div id="imageUrlsContainer"></div>
                        <button type="button" class="btn btn-add" id="addMoreImages">আরো ছবি যোগ করুন</button>
                    </div>
                    <div class="form-group"><label for="productVideoUrl">পণ্যের ভিডিও লিংক (ঐচ্ছিক)</label><input type="url" id="productVideoUrl" placeholder="ভিডিও লিংক (YouTube/Vimeo/etc)"></div>
                    <button type="submit" class="btn" id="submitBtn">পণ্য যোগ করুন</button>
                    <button type="button" class="btn btn-secondary" id="resetBtn" style="display: none;">বাতিল করুন</button>
                </form>
            </div>

            <div class="panel list-panel" style="margin-top: 2rem;">
                <h2>পণ্যের তালিকা</h2>
                <div id="productList">
                    <p>এখনো কোনো পণ্য যোগ করা হয়নি।</p>
                </div>
            </div>
        </div>

        <div class="panel" id="output-panel">
            <h2>জেনারেট হওয়া JSON কোড</h2>
            <div class="output-container">
                <textarea id="jsonOutput" readonly placeholder="এখানে JSON কোড তৈরি হবে..."></textarea>
                <button class="btn copy-btn" id="copyJsonBtn">কপি করুন</button>
            </div>
        </div>
    </div>

    <script>
        const productForm = document.getElementById('productForm');
        const productName = document.getElementById('productName');
        const productPrice = document.getElementById('productPrice');
        const productVideoUrl = document.getElementById('productVideoUrl');
        const imageUrlsContainer = document.getElementById('imageUrlsContainer');
        const addMoreImagesBtn = document.getElementById('addMoreImages');
        const submitBtn = document.getElementById('submitBtn');
        const resetBtn = document.getElementById('resetBtn');
        const editIndexInput = document.getElementById('editIndex');
        const formTitle = document.getElementById('form-title');
        const productListDiv = document.getElementById('productList');
        const jsonOutputTextarea = document.getElementById('jsonOutput');
        const copyJsonBtn = document.getElementById('copyJsonBtn');

        let products = [];

        function renderUI() {
            renderProductList();
            renderJsonOutput();
        }

        function renderProductList() {
            productListDiv.innerHTML = '';
            if (products.length === 0) {
                productListDiv.innerHTML = '<p>এখনো কোনো পণ্য যোগ করা হয়নি।</p>';
                return;
            }
            products.forEach((product, index) => {
                const item = document.createElement('div');
                item.className = 'product-list-item';
                // --- ছবি প্রিভিউ সহ নতুন HTML ---
                const previewImageSrc = (product.imageUrls && product.imageUrls.length > 0) ? product.imageUrls[0] : 'https://via.placeholder.com/60?text=No+Img';
                item.innerHTML = `
                    <img src="${previewImageSrc}" alt="Preview" class="preview-image">
                    <div class="info">
                        <strong>${product.name}</strong>
                        <br>
                        <small>৳ ${product.price}</small>
                    </div>
                    <div class="actions">
                        <button class="btn btn-secondary" onclick="editProduct(${index})">এডিট</button>
                        <button class="btn" style="background-color: #e74c3c;" onclick="deleteProduct(${index})">ডিলিট</button>
                    </div>
                `;
                productListDiv.appendChild(item);
            });
        }

        function renderJsonOutput() {
            jsonOutputTextarea.value = JSON.stringify(products, null, 2);
        }

        function addImageField(value = '') {
            const container = document.createElement('div');
            container.className = 'image-url-container';
            container.innerHTML = `
                <input type="url" class="product-image-url" placeholder="ছবির লিংক" value="${value}" required>
                <button type="button" class="remove-image-btn" onclick="removeImageField(this)">×</button>
            `;
            imageUrlsContainer.appendChild(container);
        }

        window.removeImageField = function(button) {
            if (imageUrlsContainer.children.length > 3) {
                button.parentElement.remove();
            } else {
                alert('ন্যূনতম ৩টি ছবির লিংক প্রয়োজন।');
            }
        };

        function resetForm() {
            productForm.reset();
            editIndexInput.value = '';
            imageUrlsContainer.innerHTML = '';
            for (let i = 0; i < 3; i++) addImageField();
            
            formTitle.textContent = 'নতুন পণ্য যোগ করুন';
            submitBtn.textContent = 'পণ্য যোগ করুন';
            resetBtn.style.display = 'none';
        }

        productForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const name = productName.value.trim();
            const price = productPrice.value.trim();
            const videoUrl = productVideoUrl.value.trim();
            const imageUrls = Array.from(document.querySelectorAll('.product-image-url'))
                                  .map(input => input.value.trim())
                                  .filter(url => url);

            if (!name || !price || imageUrls.length < 3) {
                alert('দয়া করে পণ্যের নাম, দাম এবং অন্তত ৩টি ছবির লিংক দিন।');
                return;
            }

            const newProduct = {
                id: Date.now(),
                name,
                price,
                imageUrls,
                videoUrl
            };

            const editIndex = editIndexInput.value;
            if (editIndex !== '') {
                newProduct.id = products[editIndex].id;
                products[editIndex] = newProduct;
            } else {
                products.push(newProduct);
            }
            
            renderUI();
            resetForm();
        });

        window.editProduct = function(index) {
            const product = products[index];
            productName.value = product.name;
            productPrice.value = product.price;
            productVideoUrl.value = product.videoUrl;
            
            imageUrlsContainer.innerHTML = '';
            product.imageUrls.forEach(url => addImageField(url));

            editIndexInput.value = index;
            formTitle.textContent = 'পণ্য এডিট করুন';
            submitBtn.textContent = 'আপডেট করুন';
            resetBtn.style.display = 'inline-block';
            document.getElementById('form-panel').scrollIntoView({ behavior: 'smooth' });
        };
        
        window.deleteProduct = function(index) {
            if (confirm(`আপনি কি "${products[index].name}" পণ্যটি ডিলিট করতে চান?`)) {
                products.splice(index, 1);
                renderUI();
            }
        };

        addMoreImagesBtn.addEventListener('click', () => addImageField());
        resetBtn.addEventListener('click', resetForm);
        copyJsonBtn.addEventListener('click', () => {
            jsonOutputTextarea.select();
            document.execCommand('copy');
            copyJsonBtn.textContent = 'কপি হয়েছে!';
            setTimeout(() => {
                copyJsonBtn.textContent = 'কপি করুন';
            }, 2000);
        });
        
        resetForm();
    </script>
</body>
</html>
